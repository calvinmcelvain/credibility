{{ load static }}
{{ block content }}
<!--External CSS & js-->
<link rel="stylesheet" href="{{ static 'Style_Crd2.css' }}" type="text/css">
<script src="{{ static 'JavaScript_Crd2.js' }}"></script>

{{ block title }}
Stage 1: Decision 1 (Cont.)
{{ endblock }}

<!-- General Information Body Cont. -->
<p>Unlike Stage 1, no participants in any role will see feedback after each decision, including Decision 1.  In other words, you will make a series of decisions without seeing the results before advancing to the next decision.  In this way, you will make a total of three decisions, only one of which will be drawn to count towards your earnings in today’s experiment.</p>
<p>At the end of Stage 2, you will see the results from all decisions made, as well as the decision that has been drawn to count towards your payment.  You will also see your total earnings from Stage 1, and your total earnings from today’s session.</p>
<p style="margin-top: 100px; margin-bottom: unset">Please click "Continue"</p>
<p style="font-size: 16px; margin-top: unset; margin-bottom: 10px" >*** Page will not continue until everyone has clicked continue ***</p>

<!--Next Button: Only allows players to continue if all players in session are ready/clicked continue-->
<button type="button" id="validation" class="Instructions" onclick="validating()">Continue</button>

<script>
// Checking if button has been clicked
window.onload = function () {
    const IsClicked = sessionStorage.getItem('IsClicked');

    if (IsClicked === 'true') {
        document.getElementById('validation').disabled = true;
    }
}

// Websocket to check if all players are ready
function liveRecv(data) {
    if (data === 'all_ready') {
        sessionStorage.setItem('IsClicked', 'false')
        document.forms[0].submit();
    }
}
</script>
{{ endblock }}