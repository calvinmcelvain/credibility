{{ load static }}
{{ block content }}
<!--External CSS & js-->
<link rel="stylesheet" href="{{ static 'Style_Crd2.css' }}" type="text/css">
<script src="{{ static 'JavaScript_Crd2.js' }}"></script>

{{ block title }}
Stage 2: Decision 1 (Cont.)
{{ endblock }}

<!-- General Information Body Cont. -->
<p>Player Bsâ€™ payoffs are determined by the table shown below. Player Bs who invest will receive earnings of 300 if the Quality is High, <span style="color: red">regardless of the number of other Player Bs who invest. </span></p>
<p style="margin-bottom: 50px">As before, you will receive a recommendation from Player A but will <span style="color: red">not</span> know the quality level of the investment opportunity when you decide to invest.</p>

<!-- Player Bs Payoff Table -->
<p class="payofftableheader">Player Bs Payoff Table</p>
<table class="playerpayofftable" style="display: flex; margin-left: 150px">
    <tr>
        <td style="width: 75px;"></td>
        <td class="header" colspan="5">Total Investors (Including You)</td>
    </tr>
    <tr>
        <td style="font-style: italic; width: 75px;">Quality</td>
        <td class="row1">1</td>
        <td class="row1">2</td>
        <td class="row1">3</td>
        <td class="row1">4</td>
        <td class="row1">5</td>
    </tr>
    <tr>
        <td class="column1">Low</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
    </tr>
    <tr>
        <td class="column1">High</td>
        <td>300</td>
        <td>300</td>
        <td>300</td>
        <td>300</td>
        <td>300</td>
    </tr>
</table>

<!-- General Information Body Cont. -->
<p style="margin-top: 100px">If you choose to not invest, you will receive your outside option. As explained previously, the outside option for each Player B will be randomly drawn from the numbers between 1 and 300. Player Bs will use the slider on their screen to select the <span style="color: red">mininum</span> outside option for which you will choose the outside option. If the randomly chosen outside option is below the number you choose with the slider, you will choose to Invest.  Otherwise, you will receive the outside option. As shown in the example we went through previously, your best choice is to set the slider <span style="color: red">equal</span> to the outside option where you would switch from choosing to invest to taking the outside option.</p>
<p style="margin-top: 50px; margin-bottom: unset">Please click "Continue"</p>
<p style="font-size: 16px; margin-top: unset; margin-bottom: 10px" >*** Page will not continue until everyone has clicked continue ***</p>

<!--Next Button: Only allows players to continue if all players in session are ready/clicked continue-->
<button type="button" id="validation" class="Instructions" onclick="validating()">Continue</button>

<script>
// Checking if button has been clicked
window.onload = function () {
    const IsClicked = sessionStorage.getItem('IsClicked');

    if (IsClicked === 'true') {
        document.getElementById('validation').disabled = true;
    }
}

// Websocket to check if all players are ready
function liveRecv(data) {
    if (data === 'all_ready') {
        sessionStorage.setItem('IsClicked', 'false')
        document.forms[0].submit();
    }
}
</script>
{{ endblock }}