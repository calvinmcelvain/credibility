{{ load static }}
{{ block content }}
<!--External CSS & js-->
<link rel="stylesheet" href="{{ static 'Style_Crd2.css' }}" type="text/css">
<script src="{{ static 'JavaScript_Crd2.js' }}"></script>

<!-- Title -->
<h2 class="Title">Stage 1 will start soon</h2>

<h2 class="BeforeStart">You are assigned <span class="highlight">{{ role }}</span> role</h2>

<script>
    window.onload = function() {
        const loaded = sessionStorage.getItem('loaded');

        if (loaded !== 'true') {
            liveSend('send');
            sessionStorage.setItem('loaded', 'true');
        }
    }

    // Websocket to check if all players are ready
    function liveRecv(data) {
        if (data === 'all_ready') {
            sessionStorage.setItem('loaded', 'false');
            document.forms[0].submit();
        }
    }
</script>

{{ endblock }}