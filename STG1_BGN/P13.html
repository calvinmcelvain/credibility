{{ load static }}
{{ block content }}
<!--External CSS & js-->
<link rel="stylesheet" href="{{ static 'Style_Crd2.css' }}" type="text/css">
<script src="{{ static 'JavaScript_Crd2.js' }}"></script>

<!-- Title -->
<span class="sample" >**Sample**</span>
<h2 class="Title">End of Round X</h2>
<h3>You are a Investor</h3>

<!--Payoff Tables-->
<div class="tables-container">
    <div>
        <p class="payofftableheader">Investors Payoff Table</p>
        <table class="playerpayofftable" style="display: flex; margin: unset">
            <tr>
                <td style="width: 75px;"></td>
                <td class="header" colspan="5">Total Investors (including you)</td>
            </tr>
            <tr>
                <td style="font-style: italic; width: 75px;">Quality</td>
                <td class="row1">1</td>
                <td class="row1">2</td>
                <td class="row1">3</td>
                <td class="row1">4</td>
                <td class="row1">5</td>
            </tr>
            <tr>
                <td class="column1">Low</td>
                {{ for p in pb_table.1 }}
                <td>{{ p }}</td>
                {{ endfor }}
            </tr>
            <tr>
                <td class="column1">Medium</td>
                {{ for p in pb_table.2 }}
                <td>{{ p }}</td>
                {{ endfor }}
            </tr>
            <tr>
                <td class="column1">High</td>
                {{ for p in pb_table.3 }}
                <td>{{ p }}</td>
                {{ endfor }}
            </tr>
        </table>
    </div>
    <div style="margin: 20px"></div>
    <div>
        <p class="payofftableheader">Advisor's Payoff Table</p>
        <table class="playerpayofftable" style="display: flex; margin: unset">
            <tr>
                <td style="width: 75px;"></td>
                <td class="header" colspan="6">Total Investors</td>
            </tr>
            <tr>
                <td  style="font-style: italic; width: 75px;">Quality</td>
                <td class="row1">0</td>
                <td class="row1">1</td>
                <td class="row1">2</td>
                <td class="row1">3</td>
                <td class="row1">4</td>
                <td class="row1">5</td>
            </tr>
            <tr>
                <td class="column1">Low</td>
                {{ for p in pa_table.1 }}
                <td>{{ p }}</td>
                {{ endfor }}
            </tr>
            <tr>
                <td class="column1">Medium</td>
                {{ for p in pa_table.2 }}
                <td>{{ p }}</td>
                {{ endfor }}
            </tr>
            <tr>
                <td class="column1">High</td>
                {{ for p in pa_table.3 }}
                <td>{{ p }}</td>
                {{ endfor }}
            </tr>
        </table>
    </div>
</div>


<!--Player History Table-->
<div style="margin: 75px"></div>
<h4 class="History">History Table:</h4>
<div class="tablescroll">
    <table class="history_header">
        <tr>
            <th>Round</th>
            <th>Advisor's Advice</th>
            <th>Your Decision</th>
            <th>Other Investors</th>
            <th>Total Investors</th>
            <th>True Quality</th>
            <th>Your Payoff</th>
            <th>Advisor's Payoff</th>
        </tr>
    </table>
    <table id="data_table">
        <tr>
            <td>7</td>
            <td>Invest</td>
            <td>Invest</td>
            <td>4</td>
            <td>5</td>
            <td>Low</td>
            <td>4</td>
            <td>3</td>
        </tr>
        <tr>
            <td>6</td>
            <td>Invest</td>
            <td>Invest</td>
            <td>3</td>
            <td>4</td>
            <td>Medium</td>
            <td>7</td>
            <td>6</td>
        </tr>
        <tr>
            <td>5</td>
            <td>Keep</td>
            <td>Invest</td>
            <td>1</td>
            <td>2</td>
            <td>Low</td>
            <td>1</td>
            <td>3</td>
        </tr>
        <tr>
            <td>4</td>
            <td>Invest</td>
            <td>Invest</td>
            <td>4</td>
            <td>5</td>
            <td>Low</td>
            <td>4</td>
            <td>3</td>
        </tr>
        <tr>
            <td>3</td>
            <td>Invest</td>
            <td>Invest</td>
            <td>3</td>
            <td>4</td>
            <td>High</td>
            <td>14</td>
            <td>0</td>
        </tr>
        <tr>
            <td>2</td>
            <td>Keep</td>
            <td>Invest</td>
            <td>2</td>
            <td>3</td>
            <td>Medium</td>
            <td>5</td>
            <td>6</td>
        </tr>
        <tr>
            <td>1</td>
            <td>Invest</td>
            <td>Invest</td>
            <td>0</td>
            <td>1</td>
            <td>Low</td>
            <td>0</td>
            <td>3</td>
        </tr>

    </table>
</div>

<!-- Next Button with confirmation pop-up & Instructions Button-->
<div style="margin-top: 100px">
    <button class="Instructions" type="button" id="validation" onclick="validating()">Continue</button>
    <button id="pop-up" class="Instructions" style="float: left; background-color: red">Instructions</button>
</div>

<!-- Instructions pop-up -->
<div id="popup-window">
    <button id="close-button" type="button" style="background-color: red; margin: unset">X</button>
    <h2 style="margin-bottom: 20px">Instructions</h2>
    <h3 style="margin-bottom: unset">General Information:</h3>
    <p>This is an experiment in decision-making. In addition to a $10 participation fee, you will be paid any additional money you accumulate during the experiment at the conclusion of today's session.All payoffs during the experiment are denominated in an artificial currency, experimental currency units (ECU). At the end of the experiment, ECU will be converted to cash at the rate of <span class="highlight">$1 per 25</span> ECU. Upon completion of the experiment, your earnings will be converted to dollars and you will be paid privately, by check. The exact amount you receive will be determined during the experiment and will depend on your decisions and the decisions of others. The identities of participants will remain confidential, meaning that at no point in time will we identify the role or actions of any individual to other participants. In other words, the actions that you take during this experiment will remain confidential.</p>
    <h3 style="margin-bottom: unset">Description of Game:</h3>
    <h4>Description of Stages, Rounds, and Groups</h4>
    <p>This experiment will consist of two stages. Right now we will only go through the instructions for Stage 1. You will receive instructions for Stage 2 after Stage 1 concludes. Stage 1 will last for 30 rounds. In each round, you will be in a six-person group with five other participants. The participants you are grouped with will be the same for all rounds of Stage 1. Your group will consist of participants in two roles. Five of the participants will participate in the experiment in the role of <i>Advisor</i>. The remaining participants in each group will be in the role of <i>Investor</i>. You will be informed of your role (<i>Advisor</i> or <i>Investor</i>) prior to the beginning of Stage 1.</p>
    <h4>Description of the Decision Tasks in Stage 1</h4>
    <p>The five Investors in each group will begin each round with an endowment of 12 ECU. If you are a Investor, you will decide individually whether to invest your 12 ECU endowment into an investment opportunity or to keep it. You cannot split your endowment – you must either invest all 12 ECU or keep all 12 ECU. Therefore, each Investor’s only decision in each round is whether to invest or keep their endowment. Before the Investors make their decisions, the Advisor in each group will receive an estimate of the quality of the investment opportunity. We will explain the details of this estimate later in the instructions. After seeing their estimate, the Advisor will then send a message to all Investors in the group. This message will include a recommendation: either “Invest” or “Keep”. All Investors will receive the same message from the Advisor. They can see the message, but not Advisor’s estimate. After receiving Advisor’s message, all Investors will make their investment decisions at the same time.  This means that Investors will not know whether the other members of their group have invested or not when making their own decisions.</p>
    <h3 style="margin-bottom: unset">Description of Investors Payoffs:</h3>
    <p>If you are a Investor and you choose to <i>keep</i> your endowment, you will retain your initial 12 ECU. This will be your payoff for the round. If you are a Investor and choose to invest your endowment, your payoff will depend on the total number of Investor’s in your group, including you, that invest (<i>Total Investors</i>) and the quality of the investment opportunity (<i>Quality</i>). The <i>Quality</i> will be drawn randomly in each round from three possible levels: Low, Medium, or High. Each quality level is equally likely to be drawn. In other words, the chance of each of level being drawn is 1/3. You can imagine that the computer rolls a single six-sided die at the beginning of each round. If the roll is a 1 or 2, the quality is low. If the roll is a 3 or 4, the quality is medium. And if the computer rolls a 5 or 6, the quality is high. A new quality level is drawn in each round (i.e. a new die roll), so knowing the quality drawn in the previous round tells you nothing about the quality drawn for the current round. <b>You will not know the quality level of the investment opportunity when you decide to invest. </b> When you make your decision in each round, you will see the payoff table below showing your payoffs if you invest, for each possible combination of <i>Quality</i> (given by the row) and <i>Total Investors</i> (given by the column), the total number of group members that invest <i>including you.</i></p>
    <div class="margin"></div>
    <table class="playerpayofftable">
        <tr>
            <td style="width: 75px;"></td>
            <td class="header" colspan="5">Total Investors (including you)</td>
        </tr>
        <tr>
            <td style="font-style: italic; width: 75px;">Quality</td>
            <td class="row1">1</td>
            <td class="row1">2</td>
            <td class="row1">3</td>
            <td class="row1">4</td>
            <td class="row1">5</td>
        </tr>
        <tr>
            <td class="column1">Low</td>
            {{ for p in pb_table.1 }}
            <td>{{ p }}</td>
            {{ endfor }}
        </tr>
        <tr>
            <td class="column1">Medium</td>
            {{ for p in pb_table.2 }}
            <td>{{ p }}</td>
            {{ endfor }}
        </tr>
        <tr>
            <td class="column1">High</td>
            {{ for p in pb_table.3 }}
            <td>{{ p }}</td>
            {{ endfor }}
        </tr>
        </tr>
    </table>
    <div class="margin"></div>
    <p>Remember that if you keep your endowment, you will earn 12 ECU regardless of the quality of the investment opportunity. Please look at an overhead screen as we go through some examples on how to read the <i>Investor</i> payoff tables.</p>
    <h3 style="margin-bottom: unset">Description of Player A Payoffs:</h3>
    <p>If you are a Advisor, your payoffs will depend on the total number of Investors in your group that invest (<i>Total Investors</i>) and on the quality level of the investment opportunity (<i>Quality</i>). The payoff table below shows a Advisor’s payoffs for each possible combination of how many Investors in the group invest (<i>Total Investors</i>) and the <i>Quality</i> of the investment opportunity. </p>
    <div class="margin"></div>
    <table class="playerpayofftable">
        <tr>
            <td style="width: 75px;"></td>
            <td class="header" colspan="6">Total Investors</td>
        </tr>
        <tr>
            <td  style="font-style: italic; width: 75px;">Quality</td>
            <td class="row1">0</td>
            <td class="row1">1</td>
            <td class="row1">2</td>
            <td class="row1">3</td>
            <td class="row1">4</td>
            <td class="row1">5</td>
        </tr>
        <tr>
            <td class="column1">Low</td>
            {{ for p in pa_table.1 }}
            <td>{{ p }}</td>
            {{ endfor }}
        </tr>
        <tr>
            <td class="column1">Medium</td>
            {{ for p in pa_table.2 }}
            <td>{{ p }}</td>
            {{ endfor }}
        </tr>
        <tr>
            <td class="column1">High</td>
            {{ for p in pa_table.3 }}
            <td>{{ p }}</td>
            {{ endfor }}
        </tr>
    </table>
    <div class="margin"></div>
    <p>Please look at an overhead screen as we go through some examples on how to read the <i>Investors’</i> payoff tables. </p>
    <h3 style="margin-bottom: unset">Description of PAdvisor Payoffs:</h3>
    <p>If you are a Advisor, your payoffs will depend on the total number of Advisor’s in your group that invest (<i>Total Investors</i>) and on the quality level of the investment opportunity (<i>Quality</i>). The payoff table below shows a Advisor’s payoffs for each possible combination of how many Investors in the group invest (<i>Total Investors</i>) and the <i>Quality</i> of the investment opportunity. If the Advisor receives an incorrect estimate, each of the two possible incorrect levels is equally likely. In other words, if the estimate is <b><i>not</i></b> equal to the true quality of the investment opportunity, there is a 1 in 2 chance (like flipping a coin) that it is equal to each of the other possible qualities. So, for example, if the <i>Quality</i> in a round is High, then there is a 83.3 percent (5 in 6) chance that the Investor will receive an estimate equal to “High”, and there is a 16.7 percent (1 in 6) that the Advisor will receive an estimate equal to one of the other possible values of <i>Quality</i> (“Low” or “Medium”). Each of the other possible estimates is equally likely. This estimate is <i>private</i> information. In other words, the Advisor can see the estimate, but the Investors will never be told what estimate their group’s Advisor received.</p>
    <h3 style="margin-bottom: unset">Making Decisions in the Games:</h3>
    <p>Recall that each game starts with the Advisor receiving an estimate of the quality level. <b><i>Before receiving their estimate,</i></b> the Advisor will choose a message for each possible estimate, recommending either “Invest” or “Keep”. The computer will then show the Advisor their estimate and send whatever message the Advisor chose for this estimate to all of the Investors in their group. The Investors choose whether or not to invest after seeing this message. To help you understand how this works, we are now going to walk through a practice round. We will tell you what choices to make and this practice round will not count towards your payment.  In other words, this practice round is only to illustrate how you will actually make decisions in each round of Stage 1. As we go through the sample round, please do not make any choices until the experimenter tells you to do so.</p>
    <button id="close-button2" type="button" style="background-color: red; margin: unset">X</button>
</div>

<script>
// Get the elements by their ID
var popupLink = document.getElementById("pop-up");
var popupWindow = document.getElementById("popup-window");
var closeButton = document.getElementById("close-button");
var closeButton2 = document.getElementById("close-button2");
// Show the pop-up window when the link is clicked
popupLink.addEventListener("click", function(event) {
event.preventDefault();
popupWindow.style.display = "block";
});
// Hide the pop-up window when the close button is clicked
closeButton.addEventListener("click", function() {
popupWindow.style.display = "none";
});
closeButton2.addEventListener("click", function() {
popupWindow.style.display = "none";
});

// Checking if button has been clicked
window.onload = function () {
    const IsClicked = sessionStorage.getItem('IsClicked');

    if (IsClicked === 'true') {
        document.getElementById('validation').disabled = true;
    }
    // Adjusting History Width
  const headerCells = document.querySelectorAll('.history_header th');
  const dataCells = document.querySelectorAll('#data_table td');

  headerCells.forEach((headerCell, index) => {
      dataCells[index].style.width = headerCell.offsetWidth + 'px';
  });
};

// Websocket to check if all players are ready
function liveRecv(data) {
    if (data === 'all_ready') {
        sessionStorage.setItem('IsClicked', 'false')
        document.forms[0].submit();
    }
}
</script>

{{ endblock }}