{{ load static }}
{{ block content }}
<!--External CSS & js-->
<link rel="stylesheet" href="{{ static 'Style_Crd2.css' }}" type="text/css">
<script src="{{ static 'JavaScript_Crd2.js' }}"></script>

{{ if player.role == C.pa_ROLE }}

<!-- Title -->
<h2 class="Title">End of Round {{ player.round_number }}</h2>
<h3>You are Player A</h3>

<!--Payoff Tables-->
<div class="tables-container">
    <div>
        <p class="payofftableheader">Your Payoff Table</p>
        <table class="playerpayofftable" style="display: flex; margin: unset">
            <tr>
                <td style="width: 75px;"></td>
                <td class="header" colspan="6">Total Investors</td>
            </tr>
            <tr>
                <td  style="font-style: italic; width: 75px;">Quality</td>
                <td class="row1">0</td>
                <td class="row1">1</td>
                <td class="row1">2</td>
                <td class="row1">3</td>
                <td class="row1">4</td>
                <td class="row1">5</td>
            </tr>
            <tr>
                <td class="column1">Low</td>
                <td>12</td>
                <td>3</td>
                <td>3</td>
                <td>3</td>
                <td>3</td>
                <td>3</td>
            </tr>
            <tr>
                <td class="column1">Medium</td>
                <td>6</td>
                <td>6</td>
                <td>6</td>
                <td>6</td>
                <td>6</td>
                <td>12</td>
            </tr>
            <tr>
                <td class="column1">High</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>30</td>
            </tr>
        </table>
    </div>
    <div style="margin: 20px"></div>
    <div>
        <p class="payofftableheader">Player Bs Payoff Table</p>
        <table class="playerpayofftable" style="display: flex; margin: unset">
            <tr>
                <td style="width: 75px;"></td>
                <td class="header" colspan="5">Total Investors</td>
            </tr>
            <tr>
                <td style="font-style: italic; width: 75px;">Quality</td>
                <td class="row1">1</td>
                <td class="row1">2</td>
                <td class="row1">3</td>
                <td class="row1">4</td>
                <td class="row1">5</td>
            </tr>
            <tr>
                <td class="column1">Low</td>
                <td>0</td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
            </tr>
            <tr>
                <td class="column1">Medium</td>
                <td>1</td>
                <td>3</td>
                <td>5</td>
                <td>7</td>
                <td>9</td>
            </tr>
            <tr>
                <td class="column1">High</td>
                <td>2</td>
                <td>4</td>
                <td>8</td>
                <td>14</td>
                <td>22</td>
            </tr>
        </table>
    </div>
</div>


<!--Player History Table-->
<div style="margin: 125px"></div>
<h4 class="History">History Table:</h4>
<h5>*** You will see the <u>Actual Signal</u> round marked in <span class="highlight">yellow</span> ***</h5>
<div class="tablescroll">
    <table class="history_header">
        <tr>
            <th>Round</th>
            <th>Low Signal Advice</th>
            <th>Medium Signal Advice</th>
            <th>High Signal Advice</th>
            <th>Total Investors</th>
            <th>Estimate</th>
            <th>Your Payoff</th>
            <th>Player Bs Payoff</th>
        </tr>
    </table>
    <table>
        {{ for p in history }}
        <tr>
            <td width="56.83">{{ p.round_number }}</td>
            <td width="153.94"{{ if p.group.actual_signal == 'Low' }} bgcolor="yellow" {{ else }}{{ endif }} >{{ p.pa_low_advice }}</td>
            <td width="187.28"{{ if p.group.actual_signal == 'Medium' }} bgcolor="yellow" {{ else }}{{ endif }} >{{ p.pa_med_advice }}</td>
            <td width="159.34"{{ if p.group.actual_signal == 'High' }} bgcolor="yellow" {{ else }}{{ endif }} >{{ p.pa_high_advice }}</td>
            <td width="126.2">{{ p.group.total_players_invest }}</td>
            <td width="76.78">{{ p.group.estimated_signal }}</td>
            <td width="99.61">{{ p.payoff }}</td>
            <td width="139.02">{{ p.group.pb_payoff }}</td>
        </tr>
        {{ endfor }}
    </table>
</div>
<button type="submit">Continue</button>

{{ else }}

<!-- Title -->
<h2 class="Title">End of Round {{ player.round_number }}</h2>
<h3>You are Player B</h3>

<!--Payoff Tables-->
<div class="tables-container">
    <div>
        <p class="payofftableheader">Your Payoff Table</p>
        <table class="playerpayofftable" style="display: flex; margin: unset">
            <tr>
                <td style="width: 75px;"></td>
                <td class="header" colspan="5">Total Investors (including you)</td>
            </tr>
            <tr>
                <td style="font-style: italic; width: 75px;">Quality</td>
                <td class="row1">1</td>
                <td class="row1">2</td>
                <td class="row1">3</td>
                <td class="row1">4</td>
                <td class="row1">5</td>
            </tr>
            <tr>
                <td class="column1">Low</td>
                <td>0</td>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
            </tr>
            <tr>
                <td class="column1">Medium</td>
                <td>1</td>
                <td>3</td>
                <td>5</td>
                <td>7</td>
                <td>9</td>
            </tr>
            <tr>
                <td class="column1">High</td>
                <td>2</td>
                <td>4</td>
                <td>8</td>
                <td>14</td>
                <td>22</td>
            </tr>
        </table>
    </div>
    <div style="margin: 20px"></div>
    <div>
        <p class="payofftableheader">Player A's Payoff Table</p>
        <table class="playerpayofftable" style="display: flex; margin: unset">
            <tr>
                <td style="width: 75px;"></td>
                <td class="header" colspan="6">Total Investors</td>
            </tr>
            <tr>
                <td  style="font-style: italic; width: 75px;">Quality</td>
                <td class="row1">0</td>
                <td class="row1">1</td>
                <td class="row1">2</td>
                <td class="row1">3</td>
                <td class="row1">4</td>
                <td class="row1">5</td>
            </tr>
            <tr>
                <td class="column1">Low</td>
                <td>12</td>
                <td>3</td>
                <td>3</td>
                <td>3</td>
                <td>3</td>
                <td>3</td>
            </tr>
            <tr>
                <td class="column1">Medium</td>
                <td>6</td>
                <td>6</td>
                <td>6</td>
                <td>6</td>
                <td>6</td>
                <td>12</td>
            </tr>
            <tr>
                <td class="column1">High</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>30</td>
            </tr>
        </table>
    </div>
</div>


<!--Player History Table-->
<div style="margin: 125px"></div>
<h4 class="History">History Table:</h4>
<div class="tablescroll">
    <table class="history_header">
        <tr>
            <th>Round</th>
            <th>Player A's Advice</th>
            <th>Your Decision</th>
            <th>Other Investors</th>
            <th>Total Investors</th>
            <th>True Quality</th>
            <th>Your Payoff</th>
            <th>Player A Payoff</th>
        </tr>
    </table>
    <table>
        {{ for p in history }}
        <tr>
            <td width="62.05">{{ p.round_number }}</td>
            <td width="160.38">{{ p.group.pa_advice }}</td>
            <td width="128.34">{{ p.pb_decision }}</td>
            <td width="145.02">{{ p.other_investors }}</td>
            <td width="137.8">{{ p.group.total_players_invest }}</td>
            <td width="114.45">{{ p.group.actual_signal }}</td>
            <td width="108.75">{{ p.payoff }}</td>
            <td width="142.22">{{ p.group.pa_payoff }}</td>
        </tr>
        {{ endfor }}
    </table>
</div>
<button type="submit">Continue</button>
{{ endif }}
{{ endblock }}