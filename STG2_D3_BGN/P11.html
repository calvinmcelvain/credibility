{{ load static }}
{{ block content }}
<!--External CSS & js-->
<link rel="stylesheet" href="{{ static 'Style_Crd2.css' }}" type="text/css">
<script src="{{ static 'JavaScript_Crd2.js' }}"></script>

{{ block title }}
Stage 1: Decision 3 (Cont.)
{{ endblock }}

<!-- General Information Body Cont. -->
<p>Player Bs face a new payoff table for Decision 3. Player Bs who choose to invest will earn 100 if the majority of Player Bs in their group (three or more) choose to invest and the Quality is High. This is shown in the table below. The outside option for each Player B will be drawn from the numbers between 1 and 100. All numbers are equally likely to be drawn. As before, the payoff table shows your payoffs as a Player B if you invest your endowment, for each possible combination of Quality (given by the row) and Total Investors (given by the column), the total number of group members that invest including you. <b>As before, you will not know the quality level of the investment opportunity when you decide to invest.</b></p>

<!-- Player Bs Payoff Table -->
<p class="payofftableheader">Player Bs Payoff Table</p>
<table class="playerpayofftable" style="display: flex; margin-left: 150px">
    <tr>
        <td style="width: 75px;"></td>
        <td class="header" colspan="5">Total Investors (Including You)</td>
    </tr>
    <tr>
        <td style="font-style: italic; width: 75px;">Quality</td>
        <td class="row1">1</td>
        <td class="row1">2</td>
        <td class="row1">3</td>
        <td class="row1">4</td>
        <td class="row1">5</td>
    </tr>
    <tr>
        <td class="column1">Low</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
    </tr>
    <tr>
        <td class="column1">High</td>
        <td>0</td>
        <td>0</td>
        <td>100</td>
        <td>100</td>
        <td>100</td>
    </tr>
</table>

<!-- General Information Body Cont. -->
<p style="margin-top: 50px">Note that Player Bs who invest will receive earnings of 100 if the majority of Player Bs in their group invest, but only when the Quality is High.</p>
<p>Player Bs will use the slider on their screen to select the <span style="color: red">maximum</span> outside option for which you will choose Invest. This choice should reflect the preference of each Player B in the following way: Any price drawn at random below the maximum selected price will result in Player B choosing to Invest.  If a price is drawn above the maximum selected price, the Player B will choose not to Invest and receive the outside option.</p>

<!-- Player Bs Decision Slider -->
<input class="decision-slider" type="range" id="slider" oninput="updateInputValue(this.value)" value="50">
<input type="number" id="sliderInput" oninput="updateSliderFromInput(this.value)" value="50" size="3">

<!-- General Information Body Cont. -->
<p>If a Player B chooses to not invest, they keep their randomly drawn outside option as their payoff. Remember that, unlike Stage 1, Player Bâ€™s outside option will not be the same in every round. It will always be shown prominently on the screen when it is drawn, along with the action of each Player B based on their maximum selected price.  Be certain to look at it carefully, since it will change from round to round.</p>
<p style="margin-top: 100px; margin-bottom: unset">Please click "Continue"</p>
<p style="font-size: 16px; margin-top: unset; margin-bottom: 10px" >*** Page will not continue until everyone has clicked continue ***</p>

<!--Next Button: Only allows players to continue if all players in session are ready/clicked continue-->
<button type="button" id="validation" class="Instructions" onclick="validating()">Continue</button>

<script>
// Checking if button has been clicked
window.onload = function () {
    const IsClicked = sessionStorage.getItem('IsClicked');

    if (IsClicked === 'true') {
        document.getElementById('validation').disabled = true;
    }
}

// Websocket to check if all players are ready
function liveRecv(data) {
    if (data === 'all_ready') {
        sessionStorage.setItem('IsClicked', 'false')
        document.forms[0].submit();
    }
}
</script>
{{ endblock }}