{{ load static }}
{{ block content }}
<!--External CSS & js-->
<link rel="stylesheet" href="{{ static 'Style_Crd2.css' }}" type="text/css">
<script src="{{ static 'JavaScript_Crd2.js' }}"></script>

{{ block title }}
Stage 1: Decision 3 (Cont.)
{{ endblock }}

<!-- General Information Body -->
<p style="margin-bottom: 50px">Player Bs who choose to invest will earn 300 if the majority of Player Bs in their group (three or more) choose to invest <span style="color: red">and</span> the Quality is High. Unlike Decision 2, the payoff of Player B depends on the quality of the investment.</p>

<!-- Player Bs Payoff Table -->
<p class="payofftableheader">Player Bs Payoff Table</p>
<table class="playerpayofftable" style="display: flex; margin-left: 150px">
    <tr>
        <td style="width: 75px;"></td>
        <td class="header" colspan="5">Total Investors (Including You)</td>
    </tr>
    <tr>
        <td style="font-style: italic; width: 75px;">Quality</td>
        <td class="row1">1</td>
        <td class="row1">2</td>
        <td class="row1">3</td>
        <td class="row1">4</td>
        <td class="row1">5</td>
    </tr>
    <tr>
        <td class="column1">Low</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
        <td>0</td>
    </tr>
    <tr>
        <td class="column1">High</td>
        <td>0</td>
        <td>0</td>
        <td>300</td>
        <td>300</td>
        <td>300</td>
    </tr>
</table>

<!-- General Information Body Cont. -->
<p style="margin-top: 50px">As in Decision 1, any Player B who chooses not to invest will receive their outside option, which will be drawn at random.  Players will again use the slider to identify their minimum value of the outside option that will lead them to not invest.</p>
<p style="margin-top: 50px; margin-bottom: unset">Please click "Continue"</p>
<p style="font-size: 16px; margin-top: unset; margin-bottom: 10px" >*** Page will not continue until everyone has clicked continue ***</p>

<!--Next Button: Only allows players to continue if all players in session are ready/clicked continue-->
<button type="button" id="validation" class="Instructions" onclick="validating()">Continue</button>

<script>
// Checking if button has been clicked
window.onload = function () {
    const IsClicked = sessionStorage.getItem('IsClicked');

    if (IsClicked === 'true') {
        document.getElementById('validation').disabled = true;
    }
}

// Websocket to check if all players are ready
function liveRecv(data) {
    if (data === 'all_ready') {
        sessionStorage.setItem('IsClicked', 'false')
        document.forms[0].submit();
    }
}
</script>
{{ endblock }}